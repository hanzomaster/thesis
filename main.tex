\documentclass[13pt,a4paper,oneside]{book} % twoside for draf
\usepackage[justification=centering]{caption}
\usepackage[utf8]{vietnam}
\usepackage[vietnamese=nohyphenation]{hyphsubst}
\usepackage{mathptmx}	% same Time New Roma
\usepackage{dirtytalk}
\usepackage{indentfirst}
\usepackage[multiple]{footmisc}
\usepackage{fancyhdr}
\usepackage[vietnamese, english]{babel}
\usepackage{titlesec}
\usepackage{placeins}
\usepackage{titletoc}
\usepackage{listings}
\usepackage[bookmarks=true]{hyperref}
\usepackage[left=3cm,right=2cm,top=2.5cm,bottom=3cm]{geometry}
\usepackage{graphicx}
\usepackage{pdfpages}
\usepackage{hyperref}
\usepackage{tikz}
\usepackage{varwidth}
\usepackage{float}
\usepackage{color}
\usepackage{multirow}
\usepackage{booktabs}
\usepackage[linesnumbered,lined,ruled,resetcount, algochapter]{algorithm2e}
\usepackage{svg}
\usepackage{tabularx}
\usepackage{nomencl}
\usepackage{scrfontsizes}
\usepackage{longtable}
\usepackage{multicol}
\usepackage[toc,page]{appendix}
\usepackage{adjustbox}
\usepackage{makecell}
\usepackage{longtable}
\usepackage{multirow}
% \usepackage{algpseudocode}
\usepackage{setting/bkthesis}
\usepackage[toc]{appendix}
\usepackage{subcaption}
\usepackage{csquotes}
%\counterwithin{figure}{chapter}
\usepackage[
defernumbers,
sortcites,
backend=biber,
bibstyle=authoryear,
sorting=nyt,
citestyle=numeric-comp
]{biblatex}
\usepackage{xpatch}

% Define code style for YAML file
\lstdefinestyle{yaml}{
     basicstyle=\color{blue}\footnotesize,
     rulecolor=\color{black},
     string=[s]{'}{'},
     stringstyle=\color{blue},
     comment=[l]{:},
     commentstyle=\color{black},
     morecomment=[l]{-}
 }

\makeatletter
\input{numeric.bbx}
\makeatother

\xpatchbibmacro{date+extrayear}{%
  \printtext[parens]%
}{%
  \setunit{\addperiod\space}%
  \printtext%
}{}{}

% \usepackage{biblatex}
\addbibresource{refs.bib}
\setlength{\parskip}{6pt}
\usetikzlibrary{calc}
\setlength{\parindent}{10mm}
\renewcommand{\baselinestretch}{1.3}
\graphicspath{{images/}}
\renewcommand{\listalgorithmcfname}{Danh sách thuật toán}
\renewcommand{\nomname}{Danh sách ký hiệu, viết tắt}
\renewcommand\appendixtocname{Phụ lục}

\SetKwRepeat{Do}{do}{while}%

\usepackage{tikz}
\usetikzlibrary{shapes.geometric}
\usetikzlibrary{arrows.meta,arrows}

% \algdef{SE}[DOWHILE]{Do}{doWhile}{\algorithmicdo}[1]{\algorithmicwhile\ #1}%
% \usepackage{setting/uetthesis}

%%% The following lines add Chapter or Appendix in front of the number
\titlecontents{chapter}%
[0pt]%
{\vspace{1ex}}%
{\bfseries Chương \thecontentslabel\quad}%
{\bfseries}%
{\bfseries\hfill\contentspage}
%%% Initially, for the main part of the document, set the label to "Chapter"
\let\chapappname\chaptername

\setcounter{tocdepth}{4}
\setcounter{secnumdepth}{4}

% \thesislayout
% hyper setup
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

% setup code area as listings
\lstset{frame=tb,
  language=Java,
  xleftmargin=10pt,xrightmargin=10pt,
%   framesep=2cm,
%   aboveskip=2cm,
%   belowskip=2cm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=left,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=2
}

\renewcommand{\bibname}{Whatever floats your boat}
\newcommand{\tcode}[1]{{\ttfamily\selectfont#1}}

\hypersetup{
	bookmarks=true,
	pdftitle={DEVELOP A MANAGEMENT SYSTEM FOR SMALL AND MEDIUM-SIZED EATERIES},
	pdfauthor={Trần Tuấn Thịnh}, % author
	pdfsubject={centralized platform},
	pdfkeywords={TeX, LaTeX, graphics, images, thesis, restaurants}, % list of keywords
	colorlinks=false,       % false: boxed links; true: colored links
	linkcolor=black,       % color of internal links
	citecolor=black,       % color of links to bibliography
	filecolor=black,        % color of file links
	urlcolor=black,        % color of external links
	linktoc=page           % only page is linked
}

\colorlet{punct}{red!60!black}
\definecolor{delim}{RGB}{20,105,176}
\colorlet{numb}{magenta!60!black}
\lstdefinelanguage{json}{
    basicstyle=\normalfont\ttfamily,
    numbers=left,
    numberstyle=\scriptsize,
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
    literate=
     *{0}{{{\color{numb}0}}}{1}
      {1}{{{\color{numb}1}}}{1}
      {2}{{{\color{numb}2}}}{1}
      {3}{{{\color{numb}3}}}{1}
      {4}{{{\color{numb}4}}}{1}
      {5}{{{\color{numb}5}}}{1}
      {6}{{{\color{numb}6}}}{1}
      {7}{{{\color{numb}7}}}{1}
      {8}{{{\color{numb}8}}}{1}
      {9}{{{\color{numb}9}}}{1}
      {:}{{{\color{punct}{:}}}}{1}
      {,}{{{\color{punct}{,}}}}{1}
      {\{}{{{\color{delim}{\{}}}}{1}
      {\}}{{{\color{delim}{\}}}}}{1}
      {[}{{{\color{delim}{[}}}}{1}
      {]}{{{\color{delim}{]}}}}{1},
}


\lstdefinelanguage{JavaScript}{
  morekeywords=[1]{break, continue, delete, else, for, function, if, in,
    new, return, this, typeof, var, void, while, with},
  % Literals, primitive types, and reference types.
  morekeywords=[2]{false, null, true, boolean, number, undefined,
    Array, Boolean, Date, Math, Number, String, Object},
  % Built-ins.
  morekeywords=[3]{eval, parseInt, parseFloat, escape, unescape},
  sensitive,
  morecomment=[s]{/*}{*/},
  morecomment=[l]//,
  morecomment=[s]{/**}{*/}, % JavaDoc style comments
  morestring=[b]',
  morestring=[b]"
}[keywords, comments, strings]

\lstalias[]{ES6}[ECMAScript2015]{JavaScript}

\lstdefinelanguage[ECMAScript2015]{JavaScript}[]{JavaScript}{
  morekeywords=[1]{await, async, case, catch, class, const, default, do,
    enum, export, extends, finally, from, implements, import, instanceof,
    let, static, super, switch, throw, try},
  morestring=[b]` % Interpolation strings.
}
\renewcommand\autoref[1]{%
	\hyperref[#1]{\ref*{#1}}%
}
\renewcommand*{\algorithmcfname}{Thuật toán}
\renewcommand\lstlistlistingname{Danh sách đoạn mã}
\renewcommand{\lstlistingname}{Đoạn mã}
\makeatletter
\renewcommand\@seccntformat[1]{\csname the#1\endcsname.\quad}
\makeatother
\renewcommand{\thetable}{\thechapter.\arabic{table}}
\renewcommand{\thefigure}{\thechapter.\arabic{figure}}
\renewcommand{\thealgocf}{\thechapter.\arabic{algocf}}
\newcolumntype{R}{>{\raggedleft\arraybackslash}X}
\newcolumntype{L}{>{\raggedright\arraybackslash}X}
\newcolumntype{F}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\let\oldFootnote\footnote
\newcommand\nextToken\relax
\renewcommand\footnote[1]{%
	\oldFootnote{#1}\futurelet\nextToken\isFootnote}
\newcommand\isFootnote{%
	\ifx\footnote\nextToken\textsuperscript{,}\fi}
\begin{document}
\renewcommand{\thelstlisting}{\thechapter.\arabic{lstlisting}}
\pagestyle{plain}
\frontmatter
\input{chapters/coverpage}
\changefontsizes[16pt]{13pt}
\renewcommand{\contentsname}{Mục lục}
\tableofcontents
\renewcommand{\listfigurename}{Danh sách hình vẽ}
\addcontentsline{toc}{chapter}{\listfigurename}
\listoffigures

\renewcommand{\listtablename}{Danh sách bảng}
\listoftables
\addcontentsline{toc}{chapter}{\listtablename}

\lstlistoflistings
\addcontentsline{toc}{chapter}{\lstlistlistingname}

\renewcommand{\chaptername}{Chương}
\renewcommand{\figurename}{Hình}
\renewcommand{\tablename}{Bảng}

% \newpage
\chapter*{Thuật ngữ}
\addcontentsline{toc}{chapter}{Thuật ngữ}
\changefontsizes[16pt]{13pt}
\begin{table}[h!]
    \centering
\resizebox{\textwidth}{!}{%
	\begin{tabular}{|ll|p{0.5\linewidth}|}
		\hline
		\multicolumn{2}{|c|}{\textbf{Thuật ngữ}}                                             & \multicolumn{1}{c|}{\multirow{2}{*}{\textbf{Ý nghĩa tiếng Việt}}} \\ \cline{1-2}
		\multicolumn{1}{|c|}{\textbf{Từ viết tắt}} & \multicolumn{1}{c|}{\textbf{Từ đầy đủ tiếng Anh}} & \multicolumn{1}{c|}{}                                  \\ \hline
		\multicolumn{1}{|l|}{K8s}                  & Kubernetes                    & Cây cú pháp trừu tượng                                 \\ \hline
  		\multicolumn{1}{|l|}{HPA}                  & Horizontal Pod Autoscale                    & Tự động mở rộng Pod theo chiều ngang                                 \\ \hline
      		\multicolumn{1}{|l|}{HA}                  & High Availability                     & Tính sẵn sàng cao                                 \\ \hline
		\multicolumn{1}{|l|}{CSP}                  & Cloud Service Provider                      & Đồ thị dòng điều khiển                                 \\ \hline
		\multicolumn{1}{|l|}{GCP}                  & Google Cloud Platform                           & Dòng mã                                                \\ \hline
		\multicolumn{1}{|l|}{GKE}                 & Google Kubernetes Engine                & Ngôn ngữ đánh dấu siêu văn bản                         \\ \hline
		\multicolumn{1}{|l|}{HTML}                  & Hypertext Markup Language          & Lý thuyết mô-đun thỏa mãn                              \\ \hline
		\multicolumn{1}{|l|}{JSX}                  & JavaScript XML          & Lý thuyết mô-đun thỏa mãn                              \\ \hline
		\multicolumn{1}{|l|}{GLSB}                  & Global Server Load Balancers          & Lý thuyết mô-đun thỏa mãn                              \\ \hline
  		\multicolumn{1}{|l|}{API}                  & Application Programming Interface          & GIao diện lập trình ứng dụng                              \\ \hline
		\multicolumn{1}{|l|}{}                  & Microservice          & kiến trúc vi dịch vụ                              \\ \hline
		\multicolumn{1}{|l|}{}                  & Message Queue          & hàng đợi tin nhắn                              \\ \hline
		\multicolumn{1}{|l|}{}                  & API Gateway          & Cổng API                              \\ \hline
		\multicolumn{1}{|l|}{}                     & Request                                    & yêu cầu                                       \\ \hline
  		\multicolumn{1}{|l|}{}                     & Autoscale                                    & Tự động mở rộng                                       \\ \hline
  		\multicolumn{1}{|l|}{}                     & Container                                    & Tương trưng cho một máy ảo (VM), mỗi container đều có CPU, cây thư mục hệ thống, không gian xử lý, bộ nhớ, v.v.                                        \\ \hline
	\end{tabular}
}
\end{table}
\mainmatter

\changefontsizes[16pt]{13pt}
\pagestyle{plain}
\include{chapters/0-base-knowledge}
\include{chapters/1-system-introduction}
\include{chapters/2-system-design}
\include{chapters/3-implementation}
\include{chapters/4-system-evaluation}
\include{chapters/5-conclusion}

\chapter*{Tài liệu tham khảo}
\addcontentsline{toc}{chapter}{Tài liệu tham khảo}
\printbibliography[keyword={vietnam}, heading=subbibliography, title={Tiếng Việt}, resetnumbers=true]
\printbibliography[notkeyword={vietnam}, heading=subbibliography, title=Tiếng Anh]
\end{document}